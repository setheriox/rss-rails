<style>
.search-container {
  max-width: 800px;
  margin: 0 auto;
  padding: 20px;
}

.search-header {
  text-align: center;
  margin-bottom: 30px;
}

.search-form {
  display: flex;
  gap: 10px;
  margin-bottom: 30px;
  justify-content: center;
}

.search-input {
  flex: 1;
  max-width: 500px;
  height: 40px;
  padding: 8px 16px;
  font-size: var(--font-size);
  background: var(--surface);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: var(--border-radius);
  color: var(--text-primary);
  transition: var(--transition);
}

.search-input:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.search-button {
  height: 40px;
  padding: 8px 24px;
  background: var(--primary);
  color: white;
  border: none;
  border-radius: var(--border-radius);
  font-size: var(--font-size);
  font-weight: 600;
  cursor: pointer;
  transition: var(--transition);
}

.search-button:hover {
  background: #2563eb;
  transform: translateY(-1px);
}

.search-results-header {
  text-align: center;
  margin-bottom: 20px;
}

.search-results-header h2 {
  font-size: var(--h2-size);
  margin-bottom: 10px;
}

.search-results-count {
  color: var(--text-secondary);
  font-size: var(--font-size);
}

.search-no-results {
  text-align: center;
  padding: 40px;
  color: var(--text-secondary);
  font-size: var(--font-size-l);
}
</style>

<div class="search-container">
  <div class="search-header">
    <h1>Search Articles</h1>
  </div>

  <%= form_with url: search_path, method: :get, local: true, class: "search-form" do |f| %>
    <%= f.text_field :q, value: params[:q], placeholder: "Search articles...", autofocus: true, class: "search-input" %>
    <%= f.submit "Search", class: "search-button" %>
  <% end %>

  <% if params[:q].present? %>
    <% if @articles.any? %>
      <div class="search-results-header">
        <h2>Results for "<%= params[:q] %>"</h2>
        <p class="search-results-count"><%= @articles.total_count %> articles found</p>
      </div>

      <div id="articles" data-controller="articles">
        <% @articles.each do |article| %>
          <div class="article_item">
            <% if article.read == true %>
              <div class="article_item_header" data-article-id="<%= article.id %>">
            <% else %>
              <div class="article_item_header unread" data-article-id="<%= article.id %>">
            <% end %>

              <div class="article_item_starred" style="cursor: pointer;" data-article-id="<%= article.id %>" data-starred="<%= article.starred %>" data-action="click->articles#toggleStar">
                <% if article.starred == true %>
                  &#x02B50;
                <% else %>
                  &#9734;
                <% end %>
              </div>
              <div class="article_item_read" style="cursor: pointer;" data-article-id="<%= article.id %>" data-read="<%= article.read %>" data-action="click->articles#toggleRead">
                <% if article.read == true %>
                  ✓
                <% else %>
                  ◯
                <% end %>
              </div>

              <div class="article_item_name" style="background-color: <%= article.feed.category.color %>">
                <span><%= article.feed.name %></span>
              </div>

              <div class="article_item_title" style="font-weight: <%= article.read ? 'normal' : 'bold' %>; cursor: pointer;" data-action="click->articles#showDescription">
                <%= article.title %>
              </div>
              <div class="article_item_url">
                <%= article.url %>
              </div>
              <div class="article_item_published">
                <%= article.published.in_time_zone("Eastern Time (US & Canada)").strftime("%Y-%m-%d %H:%M") %>
              </div>
            </div>
            <div class="article_item_body">
              <div class="article_item_description" style="display: none;">
                <%= (article.sanitized_description || "No description available").html_safe %>
                <br />
                <br />
                <a href="<%= article.url %>" target="_blank">*Visit Full Article*</a>
              </div>
            </div>
          </div>
        <% end %>
      </div>

      <div class="pagination-container">
        <%= paginate @articles %>
      </div>
    <% else %>
      <p class="search-no-results">No articles found for "<%= params[:q] %>"</p>
    <% end %>
  <% end %>
</div>
