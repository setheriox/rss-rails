<div class="dashboard">
  <!-- Totals -->
  <div class="d-totals">
    <div class="d-totals-item">Total Articles: <%= @total_articles %></div>
    <div class="d-totals-item">Total Feeds: <%= @total_feeds %></div>
    <div class="d-totals-item">Total Categories: <%= @total_categories %></div>
    <div class="d-totals-item">Total Filters: <%= @total_filters %></div>
  </div>

  <!-- Article Stats -->
  <div class="d-article-stats">
    <h2>Articles Overview</h2>
    <div class="stats-grid">
      <div class="stat-item">
        <div class="stat-label">Read</div>
        <div class="stat-value"><%= @read_articles %></div>
        <div class="stat-bar" style="--percent: <%= @total_articles > 0 ? (@read_articles.to_f / @total_articles * 100).round : 0 %>%"></div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Unread</div>
        <div class="stat-value"><%= @unread_articles %></div>
        <div class="stat-bar" style="--percent: <%= @total_articles > 0 ? (@unread_articles.to_f / @total_articles * 100).round : 0 %>%"></div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Starred</div>
        <div class="stat-value"><%= @starred_articles %></div>
        <div class="stat-bar" style="--percent: <%= @total_articles > 0 ? (@starred_articles.to_f / @total_articles * 100).round : 0 %>%"></div>
      </div>
      <div class="stat-item">
        <div class="stat-label">Filtered</div>
        <div class="stat-value"><%= @filtered_articles %></div>
        <div class="stat-bar" style="--percent: <%= @total_articles > 0 ? (@filtered_articles.to_f / @total_articles * 100).round : 0 %>%"></div>
      </div>
    </div>
  </div>
<!-- Categories and Feeds -->
<div class="d-main">
  <div class="d-category">
    <h2>Categories</h2>
    <% @categories_count.each do |category| %>
      <div class="d-c-item" style="border-left: 5px solid <%= category.color || '#bb86fc' %>;">
        <div class="d-c-name"><%= category.name %></div>
        <div class="d-c-count"><%= category.articles_count %></div>
      </div>
    <% end %>
  </div>

  <div class="d-feeds">
    <h2>Top Feeds</h2>
    <% if @top_feeds.any? %>
      <% @top_feeds.each do |feed_name, count| %>
        <div class="d-f-item">
          <div class="d-f-name"><%= feed_name %></div>
          <div class="d-f-count"><%= count %></div>
        </div>
      <% end %>
    <% else %>
      <p>No feeds yet.</p>
    <% end %>
  </div>
</div>

<!-- Feed Activity Panels (new row) -->
<div class="d-feed-activity">
  <div class="activity-panel">
    <h3>Most Active Feeds (24h)</h3>
    <% @feeds_24h.each do |feed_name, count| %>
      <div class="activity-item">
        <div class="feed-name"><%= feed_name %></div>
        <div class="feed-bar-container">
          <div class="feed-bar" style="--width: <%= (@feeds_24h.values.max && @feeds_24h.values.max > 0) ? ((count.to_f / @feeds_24h.values.max) * 100).round : 0 %>%"></div>
        </div>
        <div class="feed-count"><%= count %></div>
      </div>
    <% end %>
  </div>

  <div class="activity-panel">
    <h3>Most Active Feeds (All Time)</h3>
    <% @feeds_all_time.each do |feed_name, count| %>
      <div class="activity-item">
        <div class="feed-name"><%= feed_name %></div>
        <div class="feed-bar-container">
          <div class="feed-bar" style="--width: <%= (@feeds_all_time.values.max && @feeds_all_time.values.max > 0) ? ((count.to_f / @feeds_all_time.values.max) * 100).round : 0 %>%"></div>
        </div>
        <div class="feed-count"><%= count %></div>
      </div>
    <% end %>
  </div>
</div>

  </div>
</div>

<style>
.dashboard {
  background-color: var(--surface, #121212);
  padding: 2rem;
  border-radius: 12px;
  max-width: 1000px;
  margin: 2rem auto;
  font-family: 'Segoe UI', sans-serif;
  color: #f5f5f5;
}

.d-totals {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 1rem;
  margin-bottom: 2rem;
}

.d-totals-item {
  background: var(--dash-item-bg, #1f1f1f);
  padding: 1rem 1.5rem;
  border-radius: 10px;
  text-align: center;
  font-weight: 600;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
  transition: transform 0.2s;
}
.d-totals-item:hover { transform: translateY(-3px); }

/* Article Stats */
.d-article-stats {
  margin-bottom: 2rem;
}
.d-article-stats h2 { color: #bb86fc; margin-bottom: 1rem; }
.stats-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  justify-content: center;
}
.stat-item {
  background: #181818;
  padding: 1rem;
  border-radius: 8px;
  width: 180px;
  text-align: center;
  box-shadow: 0 2px 6px rgba(0,0,0,0.5);
}
.stat-label { font-weight: 600; margin-bottom: 0.5rem; color: #bb86fc; }
.stat-value { font-weight: 700; font-size: 1.2rem; color: #03dac6; margin-bottom: 0.5rem; }
.stat-bar {
  height: 8px;
  border-radius: 4px;
  background: #03dac6;
  width: var(--percent, 50%);
  transition: width 0.3s;
}

/* Categories and Feeds */
.d-main {
  display: flex;
  flex-wrap: wrap;
  gap: 2rem;
  justify-content: center;
}

.d-category, .d-feeds {
  flex: 1 1 400px;
  background: #181818;
  padding: 1.5rem;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.5);
}

.d-category h2, .d-feeds h2 {
  margin-bottom: 1rem;
  font-size: 1.5rem;
  color: #bb86fc;
}

.d-c-item, .d-f-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.6rem 0;
  transition: background 0.2s;
  border-radius: 6px;
}
.d-c-item:hover, .d-f-item:hover { background: rgba(255,255,255,0.05); }

.d-c-name, .d-f-name { font-weight: 600; color: #bb86fc; }
.d-c-count, .d-f-count { font-weight: 500; color: #03dac6; }

.d-feed-activity {
  display: flex;
  gap: 2rem;
  flex-wrap: wrap;
  justify-content: center; 
  margin-top: 2rem;
}

.activity-panel {
  background: #181818;
  border-radius: 12px;
  flex: 1 1 400px; 
  max-width: 48%; 
  box-shadow: 0 2px 8px rgba(0,0,0,0.5);
}

.activity-panel h3 {
  color: #bb86fc;
  margin-bottom: 1rem;
  font-size: 1.2rem;
  text-align: center;
}

.activity-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

.feed-name {
  width: 40%;
  font-weight: 600;
  color: #bb86fc;
}

.feed-bar-container {
  flex: 1;
  background: #2c2c2c;
  height: 12px;
  border-radius: 6px;
  overflow: hidden;
}

.feed-bar {
  height: 100%;
  border-radius: 6px;
  background: #03dac6;
  width: var(--width, 50%);
  transition: width 0.3s;
}

.feed-count {
  width: 50px;
  text-align: right;
  font-weight: 500;
  color: #f5f5f5;
}
</style>
